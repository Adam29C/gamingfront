{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Content from\"../../Layout/Content/Content1\";import Formikform from\"../../Helpers/Form\";import{jwtDecode}from\"jwt-decode\";import*as valid_err from\"../../Utils/Common_Msg\";import{Link,useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import ToastButton from\"../../Helpers/Toast\";import toast from\"react-hot-toast\";import{v4}from\"uuid\";import{Login,Generate_Token}from\"../../Redux/Slice/Auth/auth.slice\";import{Name_regex,Password_Rejex,Mobile_regex}from\"../../Utils/Valid_Rejex\";import{useFormik}from\"formik\";import Loader from\"../../Helpers/Loader\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Users=()=>{const navigate=useNavigate();const dispatch=useDispatch();const{isLoading}=useSelector(state=>state.AuthSlice);const[token,setToken]=useState(\"\");const isValidContact=mobile=>{return Mobile_regex(mobile);};const isValidPassword=mobile=>{return Password_Rejex(mobile);};const getToken=async()=>{const request1={deviceId:v4()};const res1=await dispatch(Generate_Token(request1)).unwrap();if(res1.statusCode===200){setToken(res1.data);}else{}};useEffect(()=>{getToken();},[]);const formik=useFormik({initialValues:{mobileNumber:\"\",password:\"\"},validate:values=>{const errors={};if(!values.password){errors.password=valid_err.PASSWORD_ERROR;}else if(!isValidPassword(values.password)){errors.password=valid_err.PASSWORD__LENGTH_ERROR;}if(!values.mobileNumber){errors.mobileNumber=valid_err.CONTACT_ERROR;}else if(!isValidContact(values.mobileNumber)){errors.mobileNumber=valid_err.INVALID_CONTACT_ERROR;}return errors;},onSubmit:async values=>{const request={mobileNumber:parseInt(values.mobileNumber),password:values.password,token:token};const res=await dispatch(Login(request)).unwrap();if(res.status){toast.success(res.msg);localStorage.setItem(\"user_details\",JSON.stringify(res.details));localStorage.setItem(\"roles\",JSON.stringify(res.details.role));localStorage.setItem(\"token\",res.token);let ROLES=res.details.role===0?\"superadmin\":res.details.role===1?\"admin\":res.details.role===2?\"user\":\"\";if(ROLES===\"superadmin\"){setTimeout(()=>{navigate(\"/super/dashboard\");},500);}else if(ROLES===\"admin\"){setTimeout(()=>{navigate(\"/admin/dashboard\");},1000);}else if(ROLES===\"user\"){navigate(\"/\");}else{toast.error(res.msg);}}else{toast.error(res.msg);}}});const fields=[{name:\"mobileNumber\",label:\" Mobile/UserName\",type:\"text\",label_size:12,col_size:12},{name:\"password\",label:\"Password\",type:\"password\",label_size:12,col_size:12}];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Content,{title:\"Login \",responsive_col:\"col-md-8 col-lg-6\",children:[/*#__PURE__*/_jsx(Formikform,{fieldtype:fields.filter(field=>!field.showWhen),formik:formik,btn_name:isLoading?/*#__PURE__*/_jsxs(\"div\",{class:\"d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Login \\xA0\"}),/*#__PURE__*/_jsx(Loader,{})]}):\"Login\",button_Size:\"col-12\",additional_field:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-15\",children:/*#__PURE__*/_jsx(Link,{className:\"font-12 text-danger fw-bold\",to:\"/forgetpassword\",children:\"Forgot your password?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-15\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 font-12\",children:\" Don't have an account?\"}),/*#__PURE__*/_jsx(Link,{className:\"font-12\",to:\"/signup\",children:\"Sign up\"})]})]})}),/*#__PURE__*/_jsx(ToastButton,{})]})});};export default Users;","map":{"version":3,"names":["React","useState","useEffect","Content","Formikform","jwtDecode","valid_err","Link","useNavigate","useDispatch","useSelector","ToastButton","toast","v4","Login","Generate_Token","Name_regex","Password_Rejex","Mobile_regex","useFormik","Loader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Users","navigate","dispatch","isLoading","state","AuthSlice","token","setToken","isValidContact","mobile","isValidPassword","getToken","request1","deviceId","res1","unwrap","statusCode","data","formik","initialValues","mobileNumber","password","validate","values","errors","PASSWORD_ERROR","PASSWORD__LENGTH_ERROR","CONTACT_ERROR","INVALID_CONTACT_ERROR","onSubmit","request","parseInt","res","status","success","msg","localStorage","setItem","JSON","stringify","details","role","ROLES","setTimeout","error","fields","name","label","type","label_size","col_size","children","title","responsive_col","fieldtype","filter","field","showWhen","btn_name","class","button_Size","additional_field","className","to"],"sources":["D:/Gaming/gaming/frontend/src/Components/Pages/Auth/Auth.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Content from \"../../Layout/Content/Content1\";\r\nimport Formikform from \"../../Helpers/Form\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport * as valid_err from \"../../Utils/Common_Msg\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ToastButton from \"../../Helpers/Toast\";\r\nimport toast from \"react-hot-toast\";\r\nimport { v4 } from \"uuid\";\r\nimport { Login, Generate_Token } from \"../../Redux/Slice/Auth/auth.slice\";\r\nimport {\r\n  Name_regex,\r\n  Password_Rejex,\r\n  Mobile_regex,\r\n} from \"../../Utils/Valid_Rejex\";\r\n\r\nimport { useFormik } from \"formik\";\r\nimport Loader from \"../../Helpers/Loader\";\r\n\r\nconst Users = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { isLoading } = useSelector((state) => state.AuthSlice);\r\n\r\n  const [token, setToken] = useState(\"\");\r\n\r\n  const isValidContact = (mobile) => {\r\n    return Mobile_regex(mobile);\r\n  };\r\n  const isValidPassword = (mobile) => {\r\n    return Password_Rejex(mobile);\r\n  };\r\n\r\n  const getToken = async () => {\r\n    const request1 = {\r\n      deviceId: v4(),\r\n    };\r\n    const res1 = await dispatch(Generate_Token(request1)).unwrap();\r\n    if (res1.statusCode === 200) {\r\n      setToken(res1.data);\r\n    } else {\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getToken();\r\n  }, []);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      mobileNumber: \"\",\r\n      password: \"\",\r\n    },\r\n\r\n    validate: (values) => {\r\n      const errors = {};\r\n\r\n      if (!values.password) {\r\n        errors.password = valid_err.PASSWORD_ERROR;\r\n      } else if (!isValidPassword(values.password)) {\r\n        errors.password = valid_err.PASSWORD__LENGTH_ERROR;\r\n      }\r\n      if (!values.mobileNumber) {\r\n        errors.mobileNumber = valid_err.CONTACT_ERROR;\r\n      } else if (!isValidContact(values.mobileNumber)) {\r\n        errors.mobileNumber = valid_err.INVALID_CONTACT_ERROR;\r\n      }\r\n\r\n      return errors;\r\n    },\r\n    onSubmit: async (values) => {\r\n      const request = {\r\n        mobileNumber: parseInt(values.mobileNumber),\r\n        password: values.password,\r\n        token: token,\r\n      };\r\n\r\n      const res = await dispatch(Login(request)).unwrap();\r\n\r\n      if (res.status) {\r\n        toast.success(res.msg);\r\n\r\n        localStorage.setItem(\"user_details\", JSON.stringify(res.details));\r\n        localStorage.setItem(\"roles\", JSON.stringify(res.details.role));\r\n        localStorage.setItem(\"token\", res.token);\r\n        let ROLES =\r\n          res.details.role === 0\r\n            ? \"superadmin\"\r\n            : res.details.role === 1\r\n            ? \"admin\"\r\n            : res.details.role === 2\r\n            ? \"user\"\r\n            : \"\";\r\n        if (ROLES === \"superadmin\") {\r\n          setTimeout(() => {\r\n            navigate(\"/super/dashboard\");\r\n          }, 500);\r\n        } else if (ROLES === \"admin\") {\r\n          setTimeout(() => {\r\n            navigate(\"/admin/dashboard\");\r\n          }, 1000);\r\n        } else if (ROLES === \"user\") {\r\n          navigate(\"/\");\r\n        } else {\r\n          toast.error(res.msg);\r\n        }\r\n      } else {\r\n        toast.error(res.msg);\r\n      }\r\n    },\r\n  });\r\n\r\n  const fields = [\r\n    {\r\n      name: \"mobileNumber\",\r\n      label: \" Mobile/UserName\",\r\n      type: \"text\",\r\n      label_size: 12,\r\n      col_size: 12,\r\n    },\r\n    {\r\n      name: \"password\",\r\n      label: \"Password\",\r\n      type: \"password\",\r\n      label_size: 12,\r\n      col_size: 12,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Content title=\"Login \" responsive_col={\"col-md-8 col-lg-6\"}>\r\n        <Formikform\r\n          fieldtype={fields.filter((field) => !field.showWhen)}\r\n          formik={formik}\r\n          btn_name={\r\n            isLoading ? (\r\n              <div class=\"d-flex justify-content-center align-items-center\">\r\n                <span>Login &nbsp;</span>\r\n                <Loader />\r\n              </div>\r\n            ) : (\r\n              \"Login\"\r\n            )\r\n          }\r\n          button_Size=\"col-12\"\r\n          additional_field={\r\n            <div className=\"d-flex justify-content-between mb-2\">\r\n              <div className=\"text-center mt-15\">\r\n                <Link\r\n                  className=\"font-12 text-danger fw-bold\"\r\n                  to={\"/forgetpassword\"}\r\n                >\r\n                  Forgot your password?\r\n                </Link>\r\n              </div>\r\n              <div className=\"text-center mt-15\">\r\n                <span className=\"mr-2 font-12\"> Don't have an account?</span>\r\n                <Link className=\"font-12\" to={\"/signup\"}>\r\n                  Sign up\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          }\r\n        />\r\n        {/* {isLoading && <Loader />} */}\r\n        <ToastButton />\r\n      </Content>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}